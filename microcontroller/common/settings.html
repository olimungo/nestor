<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="style.css" />
        <script defer src="common-scripts.js"></script>
        <script defer src="settings-scripts.js"></script>

        <title>Settings</title>
    </head>

    <body>
        <div id="app-spinner" class="center-horizontal margin-top-large">
            <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
        </div>

        <div id="app" class="display-none">
            <div id="settings">
                <h1 class="inline">
                    <button
                        class="button-back"
                        onclick="window.location.href = 'index.html'"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            version="1.1"
                            viewBox="0 0 32 32"
                            xml:space="preserve"
                            class="svg-back"
                        >
                            <path
                                d="M28,14H8.8l4.62-4.62C13.814,8.986,14,8.516,14,8c0-0.984-0.813-2-2-2c-0.531,0-0.994,0.193-1.38,0.58l-7.958,7.958 
                                C2.334,14.866,2,15.271,2,16s0.279,1.08,0.646,1.447l7.974,7.973C11.006,25.807,11.469,26,12,26c1.188,0,2-1.016,2-2 
                                c0-0.516-0.186-0.986-0.58-1.38L8.8,18H28c1.104,0,2-0.896,2-2S29.104,14,28,14z"
                                fill="#242c37"
                            />
                        </svg>
                    </button>
                    <div>Settings</div>
                </h1>

                <div class="card card-padding">
                    <h2 class="margin-bottom">UNIQUE ID</h2>

                    <div class="center-horizontal">
                        <input
                            id="net-id"
                            class="label net-id"
                            type="number"
                            oninput="if (this.value.length > 2) this.value = this.value.slice(0, 2); else debouncedSetNetId()"
                        />
                    </div>
                </div>

                <div class="card card-padding">
                    <h2 class="margin-bottom">WIFI NETWORKS</h2>

                    <ul id="ssids-list"></ul>
                </div>
            </div>

            <div id="password" class="display-none">
                <h1 class="inline">
                    <button class="button-back" onclick="displaySettings()">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            version="1.1"
                            viewBox="0 0 32 32"
                            xml:space="preserve"
                            class="svg-back"
                        >
                            <path
                                d="M28,14H8.8l4.62-4.62C13.814,8.986,14,8.516,14,8c0-0.984-0.813-2-2-2c-0.531,0-0.994,0.193-1.38,0.58l-7.958,7.958 
                                C2.334,14.866,2,15.271,2,16s0.279,1.08,0.646,1.447l7.974,7.973C11.006,25.807,11.469,26,12,26c1.188,0,2-1.016,2-2 
                                c0-0.516-0.186-0.986-0.58-1.38L8.8,18H28c1.104,0,2-0.896,2-2S29.104,14,28,14z"
                                fill="#242c37"
                            />
                        </svg>
                    </button>
                    <div>Password</div>
                </h1>

                <div class="card card-padding">
                    <h2 class="center-horizontal-inline margin-bottom">
                        FOR&nbsp;<span id="ssid"></span>
                    </h2>

                    <form onsubmit="return false">
                        <div class="center-horizontal">
                            <input
                                id="input-password"
                                class="label password"
                                type="text"
                            />
                        </div>

                        <div class="margin-top center-horizontal">
                            <button
                                type="submit"
                                class="button-connect"
                                onclick="connect()"
                            >
                                CONNECT
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="connection" class="display-none margin-top-large">
                <div class="card card-padding">
                    <h2 class="margin-bottom">CONNECTION IN PROGRESS</h2>

                    <div class="center-horizontal">
                        <div id="spinner" class="spinner">
                            <div class="bounce1"></div>
                            <div class="bounce2"></div>
                            <div class="bounce3"></div>
                        </div>
                    </div>

                    <div class="connection-details">
                        Please, wait 20 seconds.<br /><br />

                        If the device doesn't successfully connect to your Wifi
                        network, refresh this page and retry.<br /><br />

                        Double-check the name of the Wifi network and the
                        password.<br />
                    </div>
                </div>
            </div>

            <div id="connection-success" class="display-none margin-top-large">
                <div class="card card-padding">
                    <h2 class="margin-bottom">CONNECTION SUCCESSFUL</h2>

                    <div class="connection-details">
                        The IP adress of your device is
                    </div>

                    <div class="center-horizontal">
                        <a
                            id="new-ip"
                            class="new-ip"
                            href="http://192.168.0.205"
                            >192.168.0.205</a
                        >
                    </div>
                </div>
            </div>

            <div class="margin-bottom-large">&nbsp;</div>

            <div class="footer inline">
                <div id="ip" class="ip">127.0.0.1</div>
            </div>
        </div>
    </body>
</html>
